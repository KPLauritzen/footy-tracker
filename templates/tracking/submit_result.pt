<div metal:use-macro="load: ../shared/_layout.pt">
    <div metal:fill-slot="content" tal:omit-tag="True">

    <div class="content">

        <div class="section">
        <div class="form-container">
        <form action="" method="POST" class="account-form">
            <h1 class="title">Register a match result</h1>
            <br><br>
            <div class="columns">
                <div class="column">
                    <h1 class="title">Team 1</h1>
                    <div class="field">
                        <label class="label">Goals</label>
                        <div class="control has-icons-left has-icons-right">
                            <input class="input" type="text" placeholder="Goals for team 1" id="goals-team1">
                            <span class="icon is-small is-left">
                              <ion-icon name="football"></ion-icon>
                            </span>
                            <span class="icon is-small is-right is-hidden">
                              <ion-icon name="checkmark" id="goals-team1-status-icon"></ion-icon>
                            </span>
                            <p class="help is-danger is-hidden" id="goals-team1-warning-text">Number of goals must be a positive integer</p>
                        </div>
                    </div>




                    <div class="field">
                        <label class="label">Defender</label>
                        <div class="control has-icons-left">
                            <div class="select">
                                <select>
                                    <option value="">Select team 1 defender</option>
                                    <option value="Jes">Jes</option>
                                    <option value="Nanna">Nanna</option>
                                    <option value="lol">lol</option>
                                    <option value="lols">lols</option>
                                </select>
                            </div>
                            <span class="icon is-small is-left">
                                <ion-icon name="person"></ion-icon>
                            </span>
                        </div>
                    </div>

                    <div class="field">
                        <label class="label">Attacker</label>
                        <div class="control">
                            <div class="control has-icons-left">
                                <div class="select">
                                    <select>
                                        <option value="">Select team 1 defender</option>
                                        <option value="Jes">Jes</option>
                                        <option value="Nanna">Nanna</option>
                                        <option value="lol">lol</option>
                                        <option value="lols">lols</option>
                                    </select>
                                </div>
                                <span class="icon is-small is-left">
                                    <ion-icon name="person"></ion-icon>
                                </span>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="column">
                    <h1 class="title">Team 2</h1>
                    <div class="field">
                        <label class="label">Goals</label>
                        <div class="control has-icons-left has-icons-right">
                            <input class="input" type="text" placeholder="Goals for team 2" id="goals-team2">
                            <span class="icon is-small is-left">
                              <ion-icon name="football"></ion-icon>
                            </span>
                            <span class="icon is-small is-right is-hidden">
                              <ion-icon name="checkmark" id="goals-team2-status-icon"></ion-icon>
                            </span>
                            <p class="help is-danger is-hidden" id="goals-team2-warning-text">Number of goals must be a positive integer</p>
                        </div>
                    </div>
                    <div class="field">
                        <label class="label">Defender</label>
                        <div class="control has-icons-left">
                            <div class="select">
                                <select>
                                    <option value="">Select team 1 defender</option>
                                    <option value="Jes">Jes</option>
                                    <option value="Nanna">Nanna</option>
                                    <option value="lol">lol</option>
                                    <option value="lols">lols</option>
                                </select>
                            </div>
                            <span class="icon is-small is-left">
                                <ion-icon name="person"></ion-icon>
                            </span>
                        </div>
                    </div>

                    <div class="field">
                        <label class="label">Attacker</label>
                        <div class="control has-icons-left">
                            <div class="select">
                                <select>
                                    <option value="">Select team 1 defender</option>
                                    <option value="Jes">Jes</option>
                                    <option value="Nanna">Nanna</option>
                                    <option value="lol">lol</option>
                                    <option value="lols">lols</option>
                                </select>
                            </div>
                            <span class="icon is-small is-left">
                                <ion-icon name="person"></ion-icon>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="columns">
            <div class="column">
                <div class="field">
                <div class="control">
                    <button type="submit" class="button is-primary">Submit</button>
                </div>
                </div>
            </div>
            </div>
            </form>
            </div>
        </div>
    </div>
</div>

</div>

<script>
    const goalsTeam1 = document.querySelector('#goals-team1')
    const goalsTeam2 = document.querySelector('#goals-team2')
    const goalsWarningTextTeam1 = document.querySelector('#goals-team1-warning-text')
    const goalsWarningTextTeam2 = document.querySelector('#goals-team2-warning-text')
    const goalStatusIconTeam1 = document.querySelector('#goals-team1-status-icon')
    const goalStatusIconTeam2 = document.querySelector('#goals-team2-status-icon')

    // Partial functions for updating the status of the elements containing goals for team 1 and team 2
    const updateTeam1GoalInputStatus = x => updateGoalInputStatus(x, goalsTeam1, goalsWarningTextTeam1, goalStatusIconTeam1),
            updateTeam2GoalInputStatus = x => updateGoalInputStatus(x, goalsTeam2, goalsWarningTextTeam2, goalStatusIconTeam2);

    // Partial functions for updating the helper text about inputed goals for team 1 and team 2
  //  const updateGoalTeam1Warning = x => updateGoalWarning(x, goalsWarningTeam1),
  //          updateGoalTeam2Warning = x => updateGoalWarning(x, goalsWarningTeam2);

    // Event listeners to update the status and warning text of the elements containing goals for team 1 and team 2
    goalsTeam1.addEventListener('input', updateTeam1GoalInputStatus);
   // goalsTeam1.addEventListener('input', updateGoalTeam1Warning);
    goalsTeam2.addEventListener('input', updateTeam2GoalInputStatus);
   // goalsTeam2.addEventListener('input', updateGoalTeam2Warning);


    function updateGoalInputStatus(e, goalInputElement, goalWarningTextElement, goalInputStatusIconElement) {
        if (isPositiveInteger(e.target.value)) {
            goalInputElement.classList.remove('is-danger')
            goalInputElement.classList.add('is-success')

            goalWarningTextElement.classList.add('is-hidden')

            goalInputStatusIconElement.parentElement.classList.remove('is-hidden')
            goalInputStatusIconElement.name = "checkmark"

        } else if (e.target.value === "") {
            goalInputElement.classList.remove('is-success')
            goalInputElement.classList.remove('is-danger')

            goalWarningTextElement.classList.add('is-hidden')

            goalInputStatusIconElement.parentElement.classList.add('is-hidden')

        } else {
          goalInputElement.classList.remove('is-success')
          goalInputElement.classList.add('is-danger')

          goalWarningTextElement.classList.remove('is-hidden')
          goalInputStatusIconElement.parentElement.classList.remove('is-hidden')
          goalInputStatusIconElement.name = "warning"
        }
    }

    // function updateGoalWarning(e, warningTextElement) {
    //     if (isPositiveInteger(e.target.value)) {
    //         warningTextElement.classList.add('is-hidden')
    //     } else if (e.target.value === "") {
    //         warningTextElement.classList.add('is-hidden')
    //     } else {
    //         warningTextElement.classList.remove('is-hidden')
    //     }
    // }

    function isPositiveInteger(str) {
      if (typeof str !== 'string') {
        return false;
      }

      const num = Number(str);

      return Number.isInteger(num) && num > 0;


    }
</script>